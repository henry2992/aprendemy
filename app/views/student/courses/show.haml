.application-wrapper.container-fluid
  .row
    =render 'layouts/user_sidebar'
    .main-bg
      %content
        .content-wrapper.col-sm-9.col-md-10
          .application-content
            .content-margin.row
              .app-text-holder.row.main-bg
                %content
                  -if @course
                    %h1= @course.name
                  -else
                    %h1 El curso especificado no se encuentra registrado
                  %br
                .col-md-6
                  %h3= @course.description if @course

                .col-md-6
                  -if @course
                    -@course.categories.each do |c|
                      %h5= c.name
                .col-md-12
                  %br
                  %br
                  %h4 Su progreso en este curso
                  %br
                  .progress
                    / Se debe imprimir el porcentaje en los valores de :aria-valuenow y en :style
                    .progress-bar.progress-bar-success{:role=>"progressbar", :"aria-valuenow"=>"#{@progress}", :"aria-valuemin"=>"0", :"aria-valuemax"=>"100", :style=>"width:#{@progress}%"}
                      = "#{@progress}%"
      -if @course
        .content-wrapper.col-sm-9.col-md-10
          .application-content
            .content-margin.row
              .app-text-holder.row.main-bg
                %content
                  .panel-group#accordion{:role=>"tablist", :"aria-multiselectable"=>"true"}
                    - if @course.sections
                      - section_number = 1
                      - @course.sections.each do |s|
                        .panel.panel-default
                          .panel-heading{:id=>"heading+#{section_number}",:role=>"tab"}
                            %h4.panel-title
                              %a.collapsed{:role=>"button", :"data-toggle"=>"collapse", :"data-parent"=>"#accordion", :href=>"#collapse#{section_number}", :"aria-expanded"=>"true", :"aria-controls"=>"collapse#{section_number}"}
                                = s.name

                          .panel-collapse.collapse{:id=>"collapse#{section_number}",:role=>"tabpanel", :"aria-labelledby"=>"heading#{section_number}", :"aria-expanded"=>"true", :style=>"height: 0px;"}
                            .panel-body
                              %ol
                                - if s.resources
                                  - s.resources.each do |r|
                                    - case r.material_type
                                      - when "Video"
                                        %li
                                          = link_to r.material.url, student_resource_path(r, section_id: s.id, course_user_id: @course_user.id)
                                      - when "Blog"
                                        %li
                                          = link_to r.generic_name, student_resource_path(r, section_id: s.id, course_user_id: @course_user.id)
                                      - when "Task"
                                        %li
                                          = link_to r.generic_name, student_resource_path(r)
                                - else
                                  %h4 No hay recursos definidos para esta secci√≥n
                        - section_number += 1
                    - else
                      %h4 No hay secciones definidas para este curso
:javascript
  $('.collapse').collapse('show')
