!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,i){var a=t.html.defaultTag();if(i&&i.toLowerCase()!=a)if(n.find("ul, ol").length>0){var o=e("<"+i+">");n.prepend(o);for(var r=t.node.contents(n.get(0))[0];r&&["UL","OL"].indexOf(r.tagName)<0;){var s=r.nextSibling;o.append(r),r=s}}else n.html("<"+i+">"+n.html()+"</"+i+">")}function i(n,i){var a=t.html.defaultTag();i||(i='div class="fr-temp-div" data-empty="true"'),i.toLowerCase()==a?n.replaceWith(n.html()):n.replaceWith(e("<"+i+">").html(n.html()))}function a(n,i){var a=t.html.defaultTag();i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),i.toLowerCase()==a?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+i+">").html(n.html()))}function o(n,i){i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+i+" "+t.node.attributes(n.get(0))+">").html(n.html()))}function r(r){"N"==r&&(r=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<s.length;l++)if(s[l].tagName!=r&&!t.node.isList(s[l])){var d=e(s[l]);"LI"==s[l].tagName?n(d,r):"LI"==s[l].parentNode.tagName&&s[l]?i(d,r):["TD","TH"].indexOf(s[l].parentNode.tagName)>=0?a(d,r):o(d,r)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function s(e,n){var i=t.selection.blocks();if(i.length){var a=i[0],o="N",r=t.html.defaultTag();a.tagName.toLowerCase()!=r&&a!=t.$el.get(0)&&(o=a.tagName),n.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active")}else n.find('.fr-command[data-param1="N"]').addClass("fr-active")}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var i=n[0],a="N",o=t.html.defaultTag();i.tagName.toLowerCase()!=o&&i!=t.$el.get(0)&&(a=i.tagName),["LI","TD","TH"].indexOf(a)>=0&&(a="N"),e.find("> span").text(t.opts.paragraphFormat[a])}else e.find("> span").text(t.opts.paragraphFormat.N)}}return{apply:r,refreshOnShow:s,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var i=this.shortcuts.get("paragraphFormat."+n);i=i?'<span class="fr-shortcut">'+i+"</span>":"",e+="<li><"+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;"><a class="fr-command" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})});