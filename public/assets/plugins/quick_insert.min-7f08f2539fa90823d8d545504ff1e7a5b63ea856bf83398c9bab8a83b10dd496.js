!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{quickInsertButtons:["image","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),e.FE.QUICK_INSERT_BUTTONS={image:{icon:"insertImage",callback:function(){var t=this;t.shared.$qi_image_input||(t.shared.$qi_image_input=e('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),e("body").append(t.shared.$qi_image_input),t.events.$on(t.shared.$qi_image_input,"change",function(){var t=e(this).data("inst");this.files&&(t.quickInsert.hide(),t.image.upload(this.files)),e(this).val("")},!0)),t.$qi_image_input=t.shared.$qi_image_input,t.helpers.isMobile()&&t.selection.save(),t.$qi_image_input.data("inst",t).trigger("click")},requiredPlugin:"image",title:"Insert Image"},table:{icon:"insertTable",callback:function(){this.quickInsert.hide(),this.table.insert(2,2),this.undo.saveStep()},requiredPlugin:"table",title:"Insert Table"},ol:{icon:"formatOL",callback:function(){this.quickInsert.hide(),this.lists.format("OL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Ordered List"},ul:{icon:"formatUL",callback:function(){this.quickInsert.hide(),this.lists.format("UL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Unordered List"},hr:{icon:"insertHR",callback:function(){this.quickInsert.hide(),this.commands.insertHR(),this.undo.saveStep()},title:"Insert Horizontal Line"}},e.FE.RegisterQuickInsertCommand=function(t,n){e.FE.QUICK_INSERT_BUTTONS[t]=n},e.FE.PLUGINS.quickInsert=function(t){function n(n){d||s(),t.$box.append(d);var i,a;i=n.offset().top-t.$box.offset().top-(d.outerHeight()-n.outerHeight())/2,a=0-d.outerWidth(),t.opts.iframe&&(i+=t.$iframe.offset().top-e(t.o_win).scrollTop()),d.css("top",i),d.css("left",a),d.data("tag",n),d.addClass("fr-visible")}function i(){var i=t.selection.element();t.node.isBlock(i)||(i=t.node.blockParent(i)),i&&t.node.isEmpty(i)&&t.node.isElement(i.parentNode)?i&&t.selection.isCollapsed()&&n(e(i)):a()}function a(){d&&(t.html.checkIfEmpty(),d.hasClass("fr-on")&&r(),d.removeClass("fr-visible fr-on"),d.css("left",-9999).css("top",-9999))}function o(n){if(n.preventDefault(),d.hasClass("fr-on"))r();else{if(!t.shared.$qi_helper){for(var i=t.opts.quickInsertButtons,a='<div class="fr-qi-helper">',o=0,s=0;s<i.length;s++){var l=e.FE.QUICK_INSERT_BUTTONS[i[s]];l&&(!l.requiredPlugin||e.FE.PLUGINS[l.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(l.requiredPlugin)>=0)&&(a+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(l.title)+'" tabindex="-1" data-cmd="'+i[s]+'" style="transition-delay: '+.025*o++ +'s;">'+t.icon.create(l.icon)+"</a>")}a+="</div>",t.shared.$qi_helper=e(a),t.tooltip.bind(t.shared.$qi_helper,".fr-qi-helper > a.fr-btn")}c=t.shared.$qi_helper,c.appendTo(t.$box),setTimeout(function(){c.css("top",parseFloat(d.css("top"))),c.css("left",parseFloat(d.css("left"))+d.outerWidth()),c.find("a").addClass("fr-size-1"),d.addClass("fr-on")},10)}}function r(){var e=t.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),d.removeClass("fr-on"))}function s(){t.shared.$quick_insert||(t.shared.$quick_insert=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Quick Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>')),d=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){d.removeClass("fr-on").appendTo(e("body")).css("left",-9999).css("top",-9999),c&&(r(),c.appendTo(e("body")))},!0),t.events.on("shared.destroy",function(){d.html("").removeData().remove(),d=null,c&&(c.html("").removeData().remove(),c=null)},!0),t.events.on("commands.before",a),t.events.on("commands.after",function(){t.popups.areVisible()||i()}),t.events.bindClick(t.$box,".fr-quick-insert > a",o),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(n){var i=e(n.currentTarget).data("cmd");e.FE.QUICK_INSERT_BUTTONS[i].callback.apply(t,[n.currentTarget])})}function l(){return!!t.$wp&&(t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),t.popups.onShow("image.edit",a),t.events.on("mouseup",i),t.helpers.isMobile()&&t.events.$on(e(t.o_doc),"selectionchange",i),t.events.on("blur",a),void t.events.on("keyup",i))}var d,c;return{_init:l,hide:a}}});