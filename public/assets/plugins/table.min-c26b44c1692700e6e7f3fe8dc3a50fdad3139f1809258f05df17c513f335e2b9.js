!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=r()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,a=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",i,a,e.outerHeight())}}function i(){var n=D();if(n){var i=t.popups.get("table.edit");i||(i=l()),t.popups.setContainer("table.edit",e(t.opts.scrollableContainer));var a=P(n),o=(a.left+a.right)/2,r=a.bottom;t.popups.show("table.edit",o,r,a.bottom-a.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore(),t.button.bulkRefresh())}}function a(){var n=D();if(n){var i=t.popups.get("table.colors");i||(i=d()),t.popups.setContainer("table.colors",e(t.opts.scrollableContainer));var a=P(n),o=(a.left+a.right)/2,r=a.bottom;u(),t.popups.show("table.colors",o,r,a.bottom-a.top)}}function o(){0===ce().length&&t.toolbar.enable()}function r(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var i="";t.opts.tableInsertButtons.length>0&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var a={buttons:i,rows_columns:s()},o=t.popups.create("table.insert",a);return t.events.$on(o,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(n){var i=e(n.currentTarget),a=i.data("row"),o=i.data("col"),r=i.parent();r.siblings(".fr-table-size-info").html(a+" &times; "+o),r.find("> span").removeClass("hover");for(var s=1;s<=t.opts.tableInsertMaxSize;s++)for(var l=0;l<=t.opts.tableInsertMaxSize;l++){var d=r.find('> span[data-row="'+s+'"][data-col="'+l+'"]');a>=s&&o>=l?d.addClass("hover"):a+1>=s||2>=s&&!t.helpers.isMobile()?d.css("display","inline-block"):s>2&&!t.helpers.isMobile()&&d.css("display","none")}},!0),o}function s(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var i=1;i<=t.opts.tableInsertMaxSize;i++){var a="inline-block";n>2&&!t.helpers.isMobile()&&(a="none");var o="fr-table-cell ";1==n&&1==i&&(o+=" hover"),e+='<span class="fr-command '+o+'" data-cmd="tableInsert" data-row="'+n+'" data-col="'+i+'" data-param1="'+n+'" data-param2="'+i+'" style="display: '+a+';"><span></span></span>'}e+='<div class="new-line"></div>'}return e+="</div></div>"}function l(e){if(e)return t.popups.onHide("table.edit",o),!0;var n="";t.opts.tableEditButtons.length>0&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var a={buttons:n},r=t.popups.create("table.edit",a);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&i()}),r}function d(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:c()},i=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&a()}),i}function c(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep===0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[n]?'<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"></span>':'<span class="fr-command" data-cmd="tableCellBackgroundColor" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i></span>';return e+="</div>"}function u(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color")}function f(n,i){var a,o,r='<table style="width: 100%;"><tbody>',s=100/i;for(a=0;n>a;a++){for(r+="<tr>",o=0;i>o;o++)r+='<td style="width: '+s.toFixed(4)+'%;">',0===a&&0===o&&(r+=e.FE.MARKERS),r+="<br></td>";r+="</tr>"}r+="</tbody></table>",t.html.insert(r),t.selection.restore()}function h(){if(ce().length>0){var e=ue();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function p(){var t=ue();if(t.length>0&&0===t.find("th").length){var n,a="<thead><tr>",o=0;for(t.find("tr:first > td").each(function(){var t=e(this);o+=parseInt(t.attr("colspan"),10)||1}),n=0;o>n;n++)a+="<th><br></th>";a+="</tr></thead>",t.prepend(a),i()}}function m(){var e=ue(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)h();else if(n.remove(),ce().length>0)i();else{t.popups.hide("table.edit");var a=e.find("tbody tr:first td:first").get(0);a&&(t.selection.setAtEnd(a),t.selection.restore())}}function g(n){var a=ue();if(a.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var o,r,s=D(),l=R(s);r="above"==n?l.min_i:l.max_i;var d="<tr>";for(o=0;o<s[r].length;o++)if("below"==n&&r<s.length-1&&s[r][o]==s[r+1][o]||"above"==n&&r>0&&s[r][o]==s[r-1][o]){if(0===o||o>0&&s[r][o]!=s[r][o-1]){var c=e(s[r][o]);c.attr("rowspan",parseInt(c.attr("rowspan"),10)+1)}}else d+="<td><br></td>";d+="</tr>";var u=e(a.find("tr").not(a.find("table tr")).get(r));"below"==n?u.after(d):"above"==n&&(u.before(d),t.popups.isVisible("table.edit")&&i())}}function v(){var n=ue();if(n.length>0){var i,a,o,r=D(),s=R(r);if(0===s.min_i&&s.max_i==r.length-1)h();else{for(i=s.max_i;i>=s.min_i;i--){for(o=e(n.find("tr").not(n.find("table tr")).get(i)),a=0;a<r[i].length;a++)if(0===a||r[i][a]!=r[i][a-1]){var l=e(r[i][a]);if(parseInt(l.attr("rowspan"),10)>1){var d=parseInt(l.attr("rowspan"),10)-1;1==d?l.removeAttr("rowspan"):l.attr("rowspan",d)}if(i<r.length-1&&r[i][a]==r[i+1][a]&&(0===i||r[i][a]!=r[i-1][a])){for(var c=r[i][a],u=a;u>0&&r[i][u]==r[i][u-1];)u--;0===u?e(n.find("tr").not(n.find("table tr")).get(i+1)).prepend(c):e(r[i+1][u-1]).after(c)}}var f=o.parent();o.remove(),0===f.find("tr").length&&f.remove(),r=D(n)}S(0,r.length-1,0,r[0].length-1,n),s.min_i>0?t.selection.setAtEnd(r[s.min_i-1][0]):t.selection.setAtEnd(r[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function y(n){var a=ue();if(a.length>0){var o,r=D(),s=R(r);o="before"==n?s.min_j:s.max_j;var l,d=100/r[0].length,c=100/(r[0].length+1);a.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/a.outerWidth()*100)}),a.find("tr").not(a.find("table tr")).each(function(t){for(var i,a=e(this),s=0,l=0;o>s-1;){if(i=a.find("> th, > td").get(l),!i){i=null;break}i==r[t][s]?(s+=parseInt(e(i).attr("colspan"),10)||1,l++):(s+=parseInt(e(r[t][s]).attr("colspan"),10)||1,"after"==n&&(i=0===l?-1:a.find("> th, > td").get(l-1)))}var u=e(i);if("after"==n&&s-1>o||"before"==n&&o>0&&r[t][o]==r[t][o-1]){if(0===t||t>0&&r[t][o]!=r[t-1][o]){var f=parseInt(u.attr("colspan"),10)+1;u.attr("colspan",f),u.css("width",(u.data("old-width")*c/d+c).toFixed(4)+"%"),u.removeData("old-width")}}else{var h;h=a.find("th").length>0?'<th style="width: '+c.toFixed(4)+'%;"><br></th>':'<td style="width: '+c.toFixed(4)+'%;"><br></td>',-1==i?a.prepend(h):null==i?a.append(h):"before"==n?u.before(h):"after"==n&&u.after(h)}}),a.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*c/d).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&i()}}function b(){var n=ue();if(n.length>0){var i,a,o,r=D(),s=R(r);if(0===s.min_j&&s.max_j==r[0].length-1)h();else{var l=100/r[0].length,d=100/(r[0].length-s.max_j+s.min_j-1);for(n.find("th, td").each(function(){o=e(this),o.hasClass("fr-selected-cell")||o.data("old-width",o.outerWidth()/n.outerWidth()*100)}),a=s.max_j;a>=s.min_j;a--)for(i=0;i<r.length;i++)if(0===i||r[i][a]!=r[i-1][a])if(o=e(r[i][a]),(parseInt(o.attr("colspan"),10)||1)>1){var c=parseInt(o.attr("colspan"),10)-1;1==c?o.removeAttr("colspan"):o.attr("colspan",c),o.css("width",((o.data("old-width")-ne(a,r))*d/l).toFixed(4)+"%"),o.removeData("old-width")}else{var u=e(o.parent().get(0));o.remove(),0===u.find("> th, > td").length&&(0===u.prev().length||0===u.next().length||u.prev().find("> th[rowspan], > td[rowspan]").length<u.prev().find("> th, > td").length)&&u.remove()}S(0,r.length-1,0,r[0].length-1,n),s.min_j>0?t.selection.setAtEnd(r[s.min_i][s.min_j-1]):t.selection.setAtEnd(r[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){o=e(this),o.data("old-width")&&(o.css("width",(o.data("old-width")*d/l).toFixed(4)+"%"),o.removeData("old-width"))})}}}function _(e,t,n){var i,a,o,r,s,l=0,d=D(n);for(t=Math.min(t,d[0].length-1),a=e;t>=a;a++)if(!(a>e&&d[0][a]==d[0][a-1])&&(r=parseInt(d[0][a].getAttribute("colspan"),10)||1,r>1&&d[0][a]==d[0][a+1]))for(l=r-1,i=1;i<d.length;i++)if(d[i][a]!=d[i-1][a]){for(o=a;a+r>o;o++)if(s=parseInt(d[i][o].getAttribute("colspan"),10)||1,s>1&&d[i][o]==d[i][o+1])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&k(d,l,"colspan",0,d.length-1,e,t)}function w(e,t,n){var i,a,o,r,s,l=0,d=D(n);for(t=Math.min(t,d.length-1),i=e;t>=i;i++)if(!(i>e&&d[i][0]==d[i-1][0])&&(r=parseInt(d[i][0].getAttribute("rowspan"),10)||1,r>1&&d[i][0]==d[i+1][0]))for(l=r-1,a=1;a<d[0].length;a++)if(d[i][a]!=d[i][a-1]){for(o=i;i+r>o;o++)if(s=parseInt(d[o][a].getAttribute("rowspan"),10)||1,s>1&&d[o][a]==d[o+1][a])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&k(d,l,"rowspan",e,t,0,d[0].length-1)}function k(e,t,n,i,a,o,r){var s,l,d;for(s=i;a>=s;s++)for(l=o;r>=l;l++)s>i&&e[s][l]==e[s-1][l]||l>o&&e[s][l]==e[s][l-1]||(d=parseInt(e[s][l].getAttribute(n),10)||1,d>1&&(d-t>1?e[s][l].setAttribute(n,d-t):e[s][l].removeAttribute(n)))}function S(e,t,n,i,a){w(e,t,a),_(n,i,a)}function E(){if(ce().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var n,a,o=D(),r=R(o),s=t.$el.find(".fr-selected-cell"),l=e(s[0]),d=l.parent(),c=d.find(".fr-selected-cell"),u=l.closest("table"),f=l.html(),h=0;for(n=0;n<c.length;n++)h+=e(c[n]).outerWidth();for(l.css("width",(h/u.outerWidth()*100).toFixed(4)+"%"),r.min_j<r.max_j&&l.attr("colspan",r.max_j-r.min_j+1),r.min_i<r.max_i&&l.attr("rowspan",r.max_i-r.min_i+1),n=1;n<s.length;n++)a=e(s[n]),"<br>"!=a.html()&&""!==a.html()&&(f+="<br>"+a.html()),a.remove();l.html(f),t.selection.setAtEnd(l.get(0)),t.selection.restore(),t.toolbar.enable(),w(r.min_i,r.max_i,u);var p=u.find("tr:empty");for(n=p.length-1;n>=0;n--)e(p[n]).remove();_(r.min_j,r.max_j,u),i()}}function T(){if(1==ce().length){var n=t.$el.find(".fr-selected-cell"),i=n.parent(),a=n.closest("table"),o=parseInt(n.attr("rowspan"),10),r=D(),s=F(n.get(0),r),l=n.clone().html("<br>");if(o>1){var d=Math.ceil(o/2);d>1?n.attr("rowspan",d):n.removeAttr("rowspan"),o-d>1?l.attr("rowspan",o-d):l.removeAttr("rowspan");for(var c=s.row+d,u=0===s.col?s.col:s.col-1;u>=0&&(r[c][u]==r[c][u-1]||c>0&&r[c][u]==r[c-1][u]);)u--;-1==u?e(a.find("tr").not(a.find("table tr")).get(c)).prepend(l):e(r[c][u]).after(l)}else{var f,h=e("<tr>").append(l);for(f=0;f<r[0].length;f++)if(0===f||r[s.row][f]!=r[s.row][f-1]){var p=e(r[s.row][f]);p.is(n)||p.attr("rowspan",(parseInt(p.attr("rowspan"),10)||1)+1)}i.after(h)}I(),t.popups.hide("table.edit")}}function x(){if(1==ce().length){var n=t.$el.find(".fr-selected-cell"),i=parseInt(n.attr("colspan"),10)||1,a=n.parent().outerWidth(),o=n.outerWidth(),r=n.clone().html("<br>"),s=D(),l=F(n.get(0),s);if(i>1){var d=Math.ceil(i/2);o=ie(l.col,l.col+d-1,s)/a*100;var c=ie(l.col+d,l.col+i-1,s)/a*100;d>1?n.attr("colspan",d):n.removeAttr("colspan"),i-d>1?r.attr("colspan",i-d):r.removeAttr("colspan"),n.css("width",o.toFixed(4)+"%"),r.css("width",c.toFixed(4)+"%")}else{var u;for(u=0;u<s.length;u++)if(0===u||s[u][l.col]!=s[u-1][l.col]){var f=e(s[u][l.col]);if(!f.is(n)){var h=(parseInt(f.attr("colspan"),10)||1)+1;f.attr("colspan",h)}}o=o/a*100/2,n.css("width",o.toFixed(4)+"%"),r.css("width",o.toFixed(4)+"%")}n.after(r),I(),t.popups.hide("table.edit")}}function C(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function M(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function L(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function A(e,t,n,i){if(t.length>0){if(!n){var a=Object.keys(i);a.splice(a.indexOf(e),1),t.removeClass(a.join(" "))}t.toggleClass(e)}}function D(t){t=t||null;var n=[];return null==t&&ce().length>0&&(t=ue()),t?(t.find("tr").not(t.find("table tr")).each(function(t,i){var a=e(i),o=0;a.find("> th, > td").each(function(i,a){for(var r=e(a),s=parseInt(r.attr("colspan"),10)||1,l=parseInt(r.attr("rowspan"),10)||1,d=t;t+l>d;d++)for(var c=o;o+s>c;c++)n[d]||(n[d]=[]),n[d][c]?o++:n[d][c]=a;o+=s})}),n):void 0}function F(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(t[n][i]==e)return{row:n,col:i}}function N(e,t,n){for(var i=e+1,a=t+1;i<n.length;){if(n[i][t]!=n[e][t]){i--;break}i++}for(i==n.length&&i--;a<n[e].length;){if(n[e][a]!=n[e][t]){a--;break}a++}return a==n[e].length&&a--,{row:i,col:a}}function I(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")})}function O(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function R(e){var n,i=e.length,a=0,o=e[0].length,r=0,s=t.$el.find(".fr-selected-cell");for(n=0;n<s.length;n++){var l=F(s[n],e),d=N(l.row,l.col,e);i=Math.min(l.row,i),a=Math.max(d.row,a),o=Math.min(l.col,o),r=Math.max(d.col,r)}return{min_i:i,max_i:a,min_j:o,max_j:r}}function $(t,n,i,a,o){var r,s,l,d,c=t,u=n,f=i,h=a;for(r=c;u>=r;r++)((parseInt(e(o[r][f]).attr("rowspan"),10)||1)>1||(parseInt(e(o[r][f]).attr("colspan"),10)||1)>1)&&(l=F(o[r][f],o),d=N(l.row,l.col,o),c=Math.min(l.row,c),u=Math.max(d.row,u),f=Math.min(l.col,f),h=Math.max(d.col,h)),((parseInt(e(o[r][h]).attr("rowspan"),10)||1)>1||(parseInt(e(o[r][h]).attr("colspan"),10)||1)>1)&&(l=F(o[r][h],o),d=N(l.row,l.col,o),c=Math.min(l.row,c),u=Math.max(d.row,u),f=Math.min(l.col,f),h=Math.max(d.col,h));for(s=f;h>=s;s++)((parseInt(e(o[c][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[c][s]).attr("colspan"),10)||1)>1)&&(l=F(o[c][s],o),d=N(l.row,l.col,o),c=Math.min(l.row,c),u=Math.max(d.row,u),f=Math.min(l.col,f),h=Math.max(d.col,h)),((parseInt(e(o[u][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[u][s]).attr("colspan"),10)||1)>1)&&(l=F(o[u][s],o),d=N(l.row,l.col,o),c=Math.min(l.row,c),u=Math.max(d.row,u),f=Math.min(l.col,f),h=Math.max(d.col,h));return c==t&&u==n&&f==i&&h==a?{min_i:t,max_i:n,min_j:i,max_j:a}:$(c,u,f,h,o)}function P(t){var n=R(t),i=e(t[n.min_i][n.min_j]),a=e(t[n.min_i][n.max_j]),o=e(t[n.max_i][n.min_j]),r=i.offset().left,s=a.offset().left+a.outerWidth(),l=i.offset().top,d=o.offset().top+o.outerHeight();return{left:r,right:s,top:l,bottom:d}}function H(n,i){if(e(n).is(i))I(),t.edit.on(),e(n).addClass("fr-selected-cell");else{O(),t.edit.off();var a=D(),o=F(n,a),r=F(i,a),s=$(Math.min(o.row,r.row),Math.max(o.row,r.row),Math.min(o.col,r.col),Math.max(o.col,r.col),a);I();for(var l=s.min_i;l<=s.max_i;l++)for(var d=s.min_j;d<=s.max_j;d++)e(a[l][d]).addClass("fr-selected-cell")}}function j(n){var i=null,a=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?i=n.target:a.closest("td").length>0?i=a.closest("td").get(0):a.closest("th").length>0&&(i=a.closest("th").get(0)),0===t.$el.find(i).length?null:i}function B(){I(),t.popups.hide("table.edit")}function z(n){var i=j(n);if(ce().length>0&&!i&&B(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&i&&B();else if(ge=!0,i){ce().length>0&&!n.shiftKey&&B(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),me=!0;var a=i.tagName.toLowerCase();n.shiftKey&&t.$el.find(a+".fr-selected-cell").length>0?e(t.$el.find(a+".fr-selected-cell").closest("table")).is(e(i).closest("table"))?H(ve,i):O():((t.keys.ctrlKey(n)||n.shiftKey)&&(ce().length>1||0===e(i).find(t.selection.element()).length&&!e(i).is(t.selection.element()))&&O(),ve=i,H(ve,ve))}}function Y(n){if(me||t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(ce().length>0&&t.toolbar.enable(),I()),!(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)){if(ge=!1,me){me=!1;var a=j(n);a||1!=ce().length?ce().length>0&&(t.selection.isCollapsed()?i():I()):I()}if(be){be=!1,he.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var o=parseFloat(he.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(o-=t.$iframe.offset().left),he.data("release-position",o),he.removeData("max-left"),he.removeData("max-right"),te(n),q()}}}function U(n){if(me===!0){var i=e(n.currentTarget);if(i.closest("table").is(ue())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void H(ve,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void H(ve,n.currentTarget)}O()}}function W(e){(37==e.which||38==e.which||39==e.which||40==e.which)&&ce().length>0&&B()}function K(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),he=t.shared.$table_resizer,t.events.$on(he,"mousedown",function(e){return!t.core.sameInstance(he)||(ce().length>0&&B(),1==e.which?(be=!0,he.addClass("fr-moving"),O(),t.edit.off(),he.find("div").css("opacity",1),!1):void 0)}),t.events.$on(he,"mousemove",function(e){return!t.core.sameInstance(he)||void(be&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),ae(e)))}),t.events.on("shared.destroy",function(){he.html("").removeData().remove(),he=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),he.hide().appendTo(e("body"))},!0)}function q(){he&&(he.find("div").css("opacity",0),he.css("top",0),he.css("left",0),he.css("height",0),he.find("div").css("height",0),he.hide())}function V(){pe&&pe.removeClass("fr-visible").css("left","-9999px")}function G(n,i){var a=e(i),o=a.closest("table"),r=o.parent();if(i&&"TD"!=i.tagName&&"TH"!=i.tagName&&(a.closest("td").length>0?i=a.closest("td"):a.closest("th").length>0&&(i=a.closest("th"))),!i||"TD"!=i.tagName&&"TH"!=i.tagName)he&&a.get(0)!=he.get(0)&&a.parent().get(0)!=he.get(0)&&t.core.sameInstance(he)&&q();else{if(a=e(i),0===t.$el.find(a).length)return!1;var s=a.offset().left-1,l=s+a.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var d,c,u,f,h,p=D(o),m=F(i,p),g=N(m.row,m.col,p),v=o.offset().top,y=o.outerHeight()-1;"rtl"!=t.opts.direction?m.col>0&&n.pageX-s<=t.opts.tableResizerOffset?(u=s,f=s-ne(m.col-1,p)+t.opts.tableResizingLimit,h=s+ne(m.col,p)-t.opts.tableResizingLimit,d=m.col-1,c=m.col):l-n.pageX<=t.opts.tableResizerOffset&&(u=l,g.col<p[g.row].length&&p[g.row][g.col+1]?(f=l-ne(g.col,p)+t.opts.tableResizingLimit,h=l+ne(g.col+1,p)-t.opts.tableResizingLimit,d=g.col,c=g.col+1):(d=g.col,c=null,f=o.offset().left-1+p[0].length*t.opts.tableResizingLimit,h=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):m.col>0&&l-n.pageX<=t.opts.tableResizerOffset?(u=l,f=l-ne(m.col,p)+t.opts.tableResizingLimit,h=l+ne(m.col-1,p)-t.opts.tableResizingLimit,d=m.col,c=m.col-1):n.pageX-s<=t.opts.tableResizerOffset&&(u=s,g.col<p[g.row].length&&p[g.row][g.col+1]?(f=s-ne(g.col+1,p)+t.opts.tableResizingLimit,h=s+ne(g.col,p)-t.opts.tableResizingLimit,d=g.col+1,c=g.col):(d=null,c=g.col,f=r.offset().left+parseFloat(r.css("padding-left")),h=r.offset().left-1+r.width()+parseFloat(r.css("padding-left"))-p[0].length*t.opts.tableResizingLimit)),he||K(),he.data("table",o),he.data("first",d),he.data("second",c),he.data("instance",t),t.$wp.append(he);var b=u-t.win.pageXOffset-t.opts.tableResizerOffset,_=v-t.win.pageYOffset;t.opts.iframe&&(b+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),_+=t.$iframe.offset().top-e(t.o_win).scrollTop(),f+=t.$iframe.offset().left,h+=t.$iframe.offset().left),he.data("max-left",f),he.data("max-right",h),he.data("origin",u-t.win.pageXOffset),he.css("top",_),he.css("left",b),he.css("height",y),he.find("div").css("height",y),he.css("padding-left",t.opts.tableResizerOffset),he.css("padding-right",t.opts.tableResizerOffset),he.show()}else t.core.sameInstance(he)&&q()}}function X(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;pe||se(),t.$box.append(pe),pe.data("instance",t);var a=e(i),o=a.find("tr:first"),r=n.pageX,s=0,l=0;t.opts.iframe&&(s+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),l+=t.$iframe.offset().top-e(t.o_win).scrollTop());var d;o.find("th, td").each(function(){var n=e(this);return n.offset().left<=r&&r<n.offset().left+n.outerWidth()/2?(d=parseInt(pe.find("a").css("width"),10),pe.css("top",l+n.offset().top-t.win.pageYOffset-d-5),pe.css("left",s+n.offset().left-t.win.pageXOffset-d/2),pe.data("selected-cell",n),pe.data("position","before"),pe.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=r&&r<n.offset().left+n.outerWidth()?(d=parseInt(pe.find("a").css("width"),10),pe.css("top",l+n.offset().top-t.win.pageYOffset-d-5),pe.css("left",s+n.offset().left+n.outerWidth()-t.win.pageXOffset-d/2),pe.data("selected-cell",n),pe.data("position","after"),pe.addClass("fr-visible"),!1):void 0})}function Q(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;pe||se(),t.$box.append(pe),pe.data("instance",t);var a=e(i),o=n.pageY,r=0,s=0;t.opts.iframe&&(r+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),s+=t.$iframe.offset().top-e(t.o_win).scrollTop());var l;a.find("tr").each(function(){var n=e(this);return n.offset().top<=o&&o<n.offset().top+n.outerHeight()/2?(l=parseInt(pe.find("a").css("width"),10),pe.css("top",s+n.offset().top-t.win.pageYOffset-l/2),pe.css("left",r+n.offset().left-t.win.pageXOffset-l-5),pe.data("selected-cell",n.find("td:first")),pe.data("position","above"),pe.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=o&&o<n.offset().top+n.outerHeight()?(l=parseInt(pe.find("a").css("width"),10),pe.css("top",s+n.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),pe.css("left",r+n.offset().left-t.win.pageXOffset-l-5),pe.data("selected-cell",n.find("td:first")),pe.data("position","below"),pe.addClass("fr-visible"),!1):void 0})}function J(n,i){if(0===ce().length){var a,o,r;if(i&&("HTML"==i.tagName||"BODY"==i.tagName||t.node.isElement(i)))for(a=1;a<=t.opts.tableInsertHelperOffset;a++){if(o=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+a),e(o).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(e(o).parents(".fr-wrapper").length||t.opts.iframe))return X(n,o.closest("table")),!0;if(r=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+a,n.pageY-t.win.pageYOffset),e(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(e(r).parents(".fr-wrapper").length||t.opts.iframe))return Q(n,r.closest("table")),!0}t.core.sameInstance(pe)&&V()}}function Z(e){ye=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&G(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||J(e,n)}function ee(){if(be){var n=he.data("table"),i=n.offset().top-t.win.pageYOffset;t.opts.iframe&&(i+=t.$iframe.offset().top-e(t.o_win).scrollTop()),he.css("top",i)}}function te(){var n=he.data("origin"),i=he.data("release-position");if(n!==i){var a=he.data("first"),o=he.data("second"),r=he.data("table"),s=r.outerWidth();if(null!==a&&null!==o){var l,d,c,u=D(r),f=[],h=[],p=[],m=[];for(l=0;l<u.length;l++)d=e(u[l][a]),c=e(u[l][o]),f[l]=d.outerWidth(),p[l]=c.outerWidth(),h[l]=f[l]/s*100,m[l]=p[l]/s*100;for(l=0;l<u.length;l++){d=e(u[l][a]),c=e(u[l][o]);var g=(h[l]*(f[l]+i-n)/f[l]).toFixed(4);d.css("width",g+"%"),c.css("width",(h[l]+m[l]-g).toFixed(4)+"%")}}else{var v,y=r.parent(),b=s/y.width()*100;v=null==a?(s-i+n)/s*b:(s+i-n)/s*b,r.css("width",Math.round(v).toFixed(4)+"%")}}he.removeData("origin"),he.removeData("release-position"),he.removeData("first"),he.removeData("second"),he.removeData("table"),t.undo.saveStep()}function ne(t,n){var i,a=e(n[0][t]).outerWidth();for(i=1;i<n.length;i++)a=Math.min(a,e(n[i][t]).outerWidth());return a}function ie(e,t,n){var i,a=0;for(i=e;t>=i;i++)a+=ne(i,n);return a}function ae(e){if(ce().length>1&&ge&&O(),ge===!1&&me===!1&&be===!1)ye&&clearTimeout(ye),(!t.edit.isDisabled()||t.popups.isVisible("table.edit"))&&(ye=setTimeout(Z,30,e));else if(be){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var i=he.data("max-left"),a=he.data("max-right");n>=i&&a>=n?he.css("left",n-t.opts.tableResizerOffset):i>n&&parseFloat(he.css("left"),10)>i-t.opts.tableResizerOffset?he.css("left",i-t.opts.tableResizerOffset):n>a&&parseFloat(he.css("left"),10)<a-t.opts.tableResizerOffset&&he.css("left",a-t.opts.tableResizerOffset)}else ge&&V()}function oe(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function re(n){var i=n.which;if(i==e.FE.KEYCODE.TAB&&0===t.opts.tabSpaces){var a;if(ce().length>0)a=t.$el.find(".fr-selected-cell:last");else{var o=t.selection.element();"TD"==o.tagName||"TH"==o.tagName?a=e(o):e(o).closest("td").length>0?a=e(o).closest("td"):e(o).closest("th").length>0&&(a=e(o).closest("th"))}a&&(n.preventDefault(),B(),n.shiftKey?a.prev().length>0?oe(a.prev()):a.closest("tr").length>0&&a.closest("tr").prev().length>0?oe(a.closest("tr").prev().find("td:last")):a.closest("tbody").length>0&&a.closest("table").find("thead tr").length>0&&oe(a.closest("table").find("thead tr th:last")):a.next().length>0?oe(a.next()):a.closest("tr").length>0&&a.closest("tr").next().length>0?oe(a.closest("tr").next().find("td:first")):a.closest("thead").length>0&&a.closest("table").find("tbody tr").length>0?oe(a.closest("table").find("tbody tr td:first")):(a.addClass("fr-selected-cell"),g("below"),I(),oe(a.closest("tr").next().find("td:first"))),t.selection.restore())}}function se(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=pe.data("selected-cell"),n=pe.data("position"),i=pe.data("instance")||t;"before"==n?(e.addClass("fr-selected-cell"),i.table.insertColumn(n),e.removeClass("fr-selected-cell")):"after"==n?(e.addClass("fr-selected-cell"),i.table.insertColumn(n),e.removeClass("fr-selected-cell")):"above"==n?(e.addClass("fr-selected-cell"),i.table.insertRow(n),e.removeClass("fr-selected-cell")):"below"==n&&(e.addClass("fr-selected-cell"),i.table.insertRow(n),e.removeClass("fr-selected-cell")),V()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){V()},!0),t.events.$on(t.$wp,"scroll",function(){V()},!0)),pe=t.shared.$ti_helper,t.events.on("destroy",function(){pe=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function le(){ve=null,clearTimeout(ye)}function de(){ce().length>0?i():(t.popups.hide("table.insert"),t.toolbar.showInline())}function ce(){return t.$el.get(0).querySelectorAll(".fr-selected-cell")}function ue(){var n=ce();if(n.length){for(var i=n[0];i&&"TABLE"!=i.tagName&&i.parentNode!=t.$el.get(0);)i=i.parentNode;return e(i&&"TABLE"==i.tagName?i:[])}return e([])}function fe(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){ge=!1,me=!1,be=!1,t.events.$on(t.$el,"mousedown",z),t.popups.onShow("image.edit",function(){I(),ge=!1,me=!1}),t.popups.onShow("link.edit",function(){I(),ge=!1,me=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&I()}),t.events.$on(t.$el,"mouseenter","th, td",U),t.events.$on(t.$win,"mouseup",Y),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",Y),t.events.$on(t.$el,"keydown",W),t.events.$on(t.$win,"mousemove",ae),t.events.$on(e(t.o_win),"scroll",ee),t.events.on("contentChanged",function(){ce().length>0&&(i(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),ce().length>0&&i()}))}),t.events.$on(e(t.o_win),"resize",function(){I()}),t.events.on("keydown",function(n){var i=ce();if(i.length>0){if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return I(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),i=[],!1;if(i.length>1&&n.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var a=0;a<i.length;a++)e(i[a]).html("<br>"),a==i.length-1&&e(i[a]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),i=[],!1}if(i.length>1&&!t.keys.ctrlKey(n))return n.preventDefault(),i=[],!1}i=[]},!0);var n=[];t.events.on("html.beforeGet",function(){n=ce();for(var e=0;e<n.length;e++)n[e].className=(n[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.get",function(e){return e=e.replace(/<(td|th)((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/(td|th)>/g,"<$1$2$3>$4</$5>")}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].className=(n[e].className?n[e].className+" ":"")+"fr-selected-cell";n=[]}),r(!0),l(!0)}t.events.on("keydown",re,!0),t.events.on("destroy",le)}var he,pe,me,ge,ve,ye,be;return{_init:fe,insert:f,remove:h,insertRow:g,deleteRow:v,insertColumn:y,deleteColumn:b,mergeCells:E,splitCellVertically:x,splitCellHorizontally:T,addHeader:p,removeHeader:m,setBackground:C,showInsertPopup:n,showEditPopup:i,showColorsPopup:a,back:de,verticalAlign:M,horizontalAlign:L,applyStyle:A,selectedTable:ue,selectedCells:ce}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,callback:function(){var e=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');e.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active"):e.addClass("fr-active"))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",
focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableRows.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableRows" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableColumns.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableColumns" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCells.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableCells" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled"),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled"),t.find('a[data-param1="merge"]').removeClass("fr-disabled")):(t.find('a[data-param1="merge"]').addClass("fr-disabled"),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled"),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled"))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell").closest("table");i&&n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableCellVerticalAlign" data-param1="'+i.toLowerCase()+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command fr-title" data-cmd="tableCellHorizontalAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell:first");i&&n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}})});